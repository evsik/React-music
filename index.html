<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,800">
    <title>React-music</title>
</head>
<body>

<div id="container">
    <div id="hook"></div>
    <h1>Play Music</h1>
    <input type="file" id="files" name="files[]" multiple/>
</div>
<script crossorigin src="https://unpkg.com/react@15/dist/react.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>
<script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
<script src="https://soulwire.github.io/sketch.js/js/sketch.min.js"></script>
<script src="app.js"></script>
<script type="text/babel">
    // Можно писать компонент как функция

    //Передается через пропс {isMusicPlaying: false}, если тру то устанавливается один класс, если фолс то другой
    function PlayButton(props) {
        const className = props.isMusicPlaying ? 'play active' : 'play';
        return <a onClick={props.onClick} href="#" title="Play video" className={className}/>;
    }

    // Можно писать компонент как класс
    //Классы компонентов должны содержать функцию, называемую render(). Эта функция возвращает JSX-код компонента
    //Компоненты, основанные на классах, могут хранить информацию о текущей ситуации. Эта информация называется состоянием
    // (state), она хранится в JS-объекте.

    class Container extends React.Component {
        constructor(props) {
            super(props);
            this.state = {isMusicPlaying: false};
        }

        handleClick() {
            if (this.state.isMusicPlaying) {
                this.audio.pause();
            } else {
                this.audio.play();
            }
            this.setState(prevState => {
                return {
                    isMusicPlaying: !prevState.isMusicPlaying
                };
            });
        };

        render() {
            return (
                <div>
                    <PlayButton
                        onClick={this.handleClick.bind(this)}
                        isMusicPlaying={this.state.isMusicPlaying}
                    />
                    <audio id="audio" ref={(audioTag) => { this.audio = audioTag }} />
                </div>
            );
        }
    }

    const placeWeWantToPutComponent = document.getElementById('hook');
    ReactDOM.render(<Container/>, placeWeWantToPutComponent);
</script>

</body>
</html>